<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}CollectNow Analyzer{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  </head>
  <body>
    <header class="hero">
      <div class="container hero__content">
        <div class="hero__branding">
          <img
            src="{{ url_for('static', filename='img/hdfc-collectnow-logo.svg') }}"
            alt="HDFC CollectNow"
            class="hero__logo"
          >
          <div>
            <h1>CollectNow Audit Sentinel</h1>
            <p>
              Automated evidence review for HDFC CollectNow integrations â€” checklist enforcement, OCR-powered
              branding checks, and API contract verification in a single dashboard.
            </p>
          </div>
        </div>
        <div class="hero__meta">
          <span class="hero__badge">Security Audit Ready</span>
          <span class="hero__badge hero__badge--accent">Razorpay Embed Compliance</span>
        </div>
      </div>
    </header>

    <main class="container" role="main">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="flash">
            {% for category, message in messages %}
              <li class="flash__item flash__item--{{ category }}">{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </main>

    <footer class="footer">
      <div class="container">
        <small>CollectNow &mdash; Automated Audit Insights</small>
      </div>
    </footer>

    <div id="chat-overlay" class="chat-overlay" hidden></div>

    <button id="chatbot-icon" class="chatbot-pill" type="button" aria-label="Open CollectNow assistant">
      <span class="chatbot-pill__icon">ðŸ¤–</span>
      <span class="chatbot-pill__label">Assist</span>
    </button>

    <section id="chat-container" class="chat-container" aria-live="polite" aria-expanded="false">
      <header class="chat-header">
        <div class="chat-header-info">
          <span class="chat-header-avatar">CN</span>
          <div class="chat-header-text">
            <span class="chat-header-title">CollectNow Assistant</span>
           
          </div>
        </div>
        <div class="chat-header-actions">
          <button id="chat-expand" class="expand-btn" type="button" aria-label="Expand assistant">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 4h6V2H2v8h2zm10-2v2h6v6h2V2zm6 18h-6v2h8v-8h-2zM4 14H2v8h8v-2H4z"/></svg>
          </button>
          <button id="chat-close" class="close-chat" type="button" aria-label="Close assistant">&times;</button>
        </div>
      </header>
      <div class="messages" role="log" aria-live="polite"></div>
      <form id="chat-form" class="chat-input" autocomplete="off">
        <div class="input-container">
          <textarea id="chat-input" rows="1" placeholder="Ask a questionâ€¦" required></textarea>
        </div>
        <button class="send-btn" type="submit" aria-label="Send message">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m4 20 16-8L4 4v6l10 2-10 2z"/></svg>
        </button>
      </form>
    </section>

    <script src="{{ url_for('static', filename='js/chatbot.js') }}" defer></script>
  </body>
</html>
